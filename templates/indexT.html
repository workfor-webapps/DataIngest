{% extends 'base.html' %}
{% block head %}
<h2>Table 1</h2>
{% endblock %}
<br>
{% block body %}
<br>
<br>
<br>
<br>
<div class="jumbotron">
    <div class="container-fluid">
        <div class="row">
            <div class="col-4">
                <strong>Leadership training design, delivery, and implementation: A meta-analysis.</strong>
                <br>
                <br>

                <p>Lacerenza CN, Reyes DL, Marlow SL, Joseph DL, Salas E.</p>

                <p><i>J Appl Psychol. 2017 Dec;102(12):1686-1718.</i></p>

                <a href="http://www.google.com">doi: 10.1037/apl0000241 </a><img src="../static/link-256.webp" width="15">
                <br>
                <br>
                <a href="http://www.google.com">Open PDF </a><img src="../static/link-256.webp" width="15">

                <hr>

            </div>
            <div class="col-6">

               <form action="/submit_form">  <!-- FOAD replace this with a flask endpoint-->

                   <div class="row">
                       <div class="col text-right ">
                           <label for="ref_con"><b>REFERENCE CONCEPT</b></label>

                       </div>
                       <div class="col">
                           <select class="form-select" id="ref_con" aria-label=" ">
                               <option selected>Leadership training effectiveness</option>
                           </select>
                       </div>

                   </div>

                   <div class="row">
                       <div class="col text-right">
                           <label for="con_cat"><b>CONCEPT CATEGORY</b></label>

                       </div>
                       <div class="col">
                           <select class="form-select" id="con_cat" aria-label=" ">
                               <option selected>Leadership </option>
                               <option value="1">One</option>
                               <option value="2">Two</option>
                               <option value="3">Three</option>
                           </select>
                       </div>
                   </div>
                   <div class="row">
                       <div class="col text-right">
                           <label for="con_dir"><b>CONCEPT DIRECTION</b></label>

                       </div>
                       <div class="col">
                           <select class="form-select" id="con_dir" aria-label=" ">
                               <option selected>Outcome</option>
                               <option value="1">One</option>
                               <option value="2">Two</option>
                               <option value="3">Three</option>
                           </select>
                       </div>
                   </div>
                   <div class="row">
                       <div class="col text-right">
                           <label for="eff_type"><b>EFFECT TYPE</b></b></label>

                       </div>
                       <div class="col">
                           <select class="form-select" id="eff_type" aria-label=" ">
                               <option selected>Correlation</option>
                               <option value="1">One</option>
                               <option value="2">Two</option>
                               <option value="3">Three</option>
                           </select>
                       </div>
                   </div>

<!--                    <input class= "btn btn-outline-success" type="submit" value="Submit">-->
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-4 ">
                <img class="img-fluid shadow-lg p-3 mb-5 bg-white" src='../static/capture.png'>
            </div>

            <div class="col-2 float-right">
                <strong>Concept Category</strong>
                <br>
                <br>
                <div class="row">
                    <div class="col-6">
                        <div class="dropdown float-right">
                            <button class="btn btn-light dropdown-toggle float-right" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Learning
                            </button>
                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                <a class="dropdown-item" href="#">Action</a>
                                <a class="dropdown-item" href="#">Another action</a>
                                <a class="dropdown-item" href="#">Something else here</a>
                            </div>
                        </div>

                    </div>
                    <div class="col-6">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked" checked>
                            <label class="form-check-label" for="flexCheckChecked">
                                Applly to all
                            </label>
                        </div>

                    </div>

                </div>

                <br>
                <div class="dropdown">
                    <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Learning
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </div>
                <br>
                <div class="dropdown">
                    <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Learning
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </div>
                <br>
                <div class="dropdown">
                    <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Learning
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </div>
                <br>
                <div class="dropdown">
                    <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Learning
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </div>
                <br>
                <div class="dropdown">
                    <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Learning
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </div>
                <br>
                <div class="dropdown">
                <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Learning
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#">Action</a>
                    <a class="dropdown-item" href="#">Another action</a>
                    <a class="dropdown-item" href="#">Something else here</a>
                </div>
            </div>
                <br>
                <div class="dropdown">
                <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Learning
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#">Action</a>
                    <a class="dropdown-item" href="#">Another action</a>
                    <a class="dropdown-item" href="#">Something else here</a>
                </div>
            </div>
                <br>
            </div>

            <div class="col-6">
<!--                <h3>-->
<!--                    <div style="text-align: center;">Extracted Table Data</div>-->
<!--                </h3>-->
                {% include 'table.html' %}
                <div class="row">
                    <div class="col-4">


                    </div>
                    <div class="col-8">
                        <a style="text-align: center;" class="btn  btn-light btn-lg" onclick="html2json()">Ignore</a>
                        <a style="text-align: center;" class="btn btn-out-dashed btn-light btn-lg" onclick="html2json()">Revist</a>
                        <a style="text-align: center;" class="btn btn-outline-success btn-lg" onclick="html2json()"> Edit </a>
                        <a class="btn btn-outline-primary btn-lg" onclick="html2json()">Accept</a>
                    </div>
                </div>


            </div>
        </div>

    </div>
</div>

<script>
    function html2json() {
        var $table = $("table")
        rows = [],
            header = [];

        $table.find("thead th").each(function () {
            header.push($(this).html());
        });

        $table.find("tbody tr").each(function () {
            var row = {};

            $(this).find("td").each(function (i) {
                var key = header[i],
                    value = $(this).html();

                row[key] = value;
            });

            rows.push(row);
        });

    //construct an HTTP request
    var xhr = new XMLHttpRequest();
    xhr.open('POST', '/post_json', true);
    xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');

    // send the collected data as JSON
    xhr.send(JSON.stringify(rows));

    console.log(JSON.stringify(rows))
    return JSON.stringify(rows);
    }

</script>
{% endblock %}